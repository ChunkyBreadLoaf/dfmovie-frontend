<nav class="menu-wrapper">
  <ul class="menu">
    <ng-container *ngFor="let item of menuItems">
      <ng-container *ngTemplateOutlet="sidebarInner; context: { item: item }"></ng-container>
    </ng-container>
  </ul>
</nav>

<ng-template #sidebarInner let-item="item">
  <li *ngIf="isMenuItemVisible(item)" class="nav-item" [class.menu-open]="!item.isCollapsed" [class.has-treeview]="item.children">

    <!-- normal item -->
    <a *ngIf="item.route && item.route.indexOf('http') != 0" class="nav-link" [routerLink]="item.route" [class.active]="item.isActive">
      <fa-icon [icon]="item.icon"></fa-icon>
      <p>
        {{ item.label }}
      </p>
    </a>

    <!-- item with external link -->
    <a *ngIf="item.route && item.route.indexOf('http') == 0 && !item.children" class="nav-link" target="_blank" [href]="item.route">
      <fa-icon [icon]="item.icon"></fa-icon>
      <p>
        {{ item.label }}
      </p>
    </a>

    <!-- item with children -->
    <a *ngIf="!item.route && item.children" class="nav-link" href="javascript:;" [class.active]="item.isActive" (click)="item.isCollapsed = !item.isCollapsed">
      <fa-icon [icon]="item.icon"></fa-icon>
      <p>
        {{ item.label }}
        <fa-icon class="state-indicator" [icon]="angleLeftIcon"></fa-icon>
      </p>
    </a>
    <ul #menuChildren *ngIf="item.children" class="nav nav-treeview">
      <ng-container *ngFor="let item of item.children">
        <ng-container *ngTemplateOutlet="sidebarInner; context: { item: item }"></ng-container>
      </ng-container>
    </ul>
  </li>
</ng-template>
